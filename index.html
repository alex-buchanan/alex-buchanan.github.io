<!DOCTYPE html>
<html lang="en-US">
<head>
	<meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Tutorial</title>
    <script src="https://unpkg.com/html5-qrcode/minified/html5-qrcode.min.js"></script>
    <!-- CODELAB: Add link rel manifest -->
	<link rel="manifest" href="/manifest.json">
	<script type="text/javascript">
		// CODELAB: Register service worker.
		if ('serviceWorker' in navigator) {
		  window.addEventListener('load', () => {
		    navigator.serviceWorker.register('/service-worker.js')
		        .then((reg) => {
		          console.log('Service worker registered.', reg);
		        });
		  }, function(err) {
		    // registration failed :(
		    console.log('ServiceWorker registration failed: ', err);
		  });

		}
	</script>
</head>
<body>

	<div id="qr-reader" style="width:500px"></div>
	<div id="qr-reader-results"></div>

	<script>
		var resultContainer = document.getElementById('qr-reader-results');
		var lastResult, countResults = 0;

		function onScanSuccess(qrCodeMessage) {
		    if (qrCodeMessage !== lastResult) {
		        ++countResults;
		        lastResult = qrCodeMessage;
		        resultContainer.innerHTML 
		            += `<div>[${countResults}] - ${qrCodeMessage}</div>`;
		    }
		}

		var html5QrcodeScanner = new Html5QrcodeScanner(
		    "qr-reader", { fps: 10, qrbox: 250 });
		html5QrcodeScanner.render(onScanSuccess);
	</script>
</body>
</html>